---
# Game Story Configuration

game_settings:
  title: "The Warehouse Mystery"
  starting_location: "warehouse_entrance"
  default_time: "Morning"
  starting_inventory:
    - "police_badge"
    - "notebook"
    - "pen"
    - "flashlight"
    - "evidence_bag"
    - "coffee"
    - "casual_pants"
    - "sneakers"
    - "worn_jacket"
    - "detective_coat"

# Character Archetypes Configuration
character_archetypes:
  analytical:
    id: "analytical"
    name: "Analytical Detective"
    description: "You solve cases through careful observation and deductive reasoning. Your analytical mind excels at connecting evidence and spotting inconsistencies. You prefer to let the facts speak for themselves rather than relying on social pressure."
    starting_skills:
      logic: 3
      perception: 3
      memory: 2
      empathy: 1
      authority: 1
      suggestion: 0
      composure: 1
      agility: 0
      endurance: 1
    starting_equipment_ids:
      - "notebook"
      - "magnifying_glass"
      - "crime_scene_kit"
  
  persuasive:
    id: "persuasive"
    name: "Persuasive Detective"
    description: "Your exceptional people skills make you a master at extracting information through conversation. You can read emotions, gain trust, and apply pressure when needed. You rely on witness testimony more than physical evidence."
    starting_skills:
      logic: 1
      perception: 1
      memory: 0
      empathy: 3
      authority: 2
      suggestion: 3
      composure: 1
      agility: 0
      endurance: 1
    starting_equipment_ids:
      - "professional_attire"
      - "confidence_charm"
      - "voice_recorder"
  
  field:
    id: "field"
    name: "Field Detective"
    description: "You excel in the field, able to chase down suspects, maintain composure in dangerous situations, and tough out long hours. Your instincts are sharp, though you might miss subtle details or social cues."
    starting_skills:
      logic: 1
      perception: 2
      memory: 0
      empathy: 0
      authority: 1
      suggestion: 1
      composure: 3
      agility: 2
      endurance: 2
    starting_equipment_ids:
      - "sturdy_boots"
      - "weatherproof_jacket"
      - "first_aid_kit"

# Item Sets (for matching set bonuses)
item_sets:
  detective_suit:
    id: "detective_suit"
    name: "Classic Detective's Attire"
    description: "A timeless ensemble that commands respect and attention."
    required_pieces: ["detective_hat", "detective_coat", "detective_slacks", "detective_shoes"]
    set_bonus:
      - attribute: "authority"
        value: 2
        description: "The complete detective's outfit grants an air of unmistakable authority."
      - attribute: "intimidation"
        value: 1
        description: "People tend to be more forthcoming when faced with the full detective regalia."

  casual_wear:
    id: "casual_wear"
    name: "Inconspicuous Attire"
    description: "Blend in with the crowd."
    required_pieces: ["worn_jacket", "casual_pants", "sneakers"]
    set_bonus:
      - attribute: "empathy"
        value: 1
        description: "People feel more at ease around someone dressed casually."
      - attribute: "stealth"
        value: 2
        description: "It's easier to go unnoticed in everyday clothing."

# Items Configuration
items:
  # Basic Equipment
  police_badge:
    id: "police_badge"
    name: "Police Badge"
    description: "Your official police badge. It's seen better days but still commands respect."
    categories: ["WEARABLE"]
    slot: "ACCESSORY"
    weight: 0.1
    style_rating: 5
    effects:
      - attribute: "authority"
        value: 2
        description: "A symbol of your position and authority."
    hidden_lore: "Badge number 738 - the same number worn by the legendary Captain Morris who cleaned up the Department in the 70s. Some officers believe it's a lucky number."
    hidden_clues:
      - "There's a small dent on the back from when it stopped a knife during your first year on the force."
    perception_difficulty: 8
    wisdom_difficulty: 12

  notebook:
    id: "notebook"
    name: "Detective's Notebook"
    description: "A well-worn notebook filled with case notes and observations."
    categories: ["TOOL"]
    weight: 0.3
    effects:
      - attribute: "logic"
        value: 1
        description: "Helps organize your thoughts and observations."

  pen:
    id: "pen"
    name: "Reliable Pen"
    description: "A sturdy pen that's never run out of ink when you needed it most."
    categories: ["TOOL"]
    weight: 0.05
    effects:
      - attribute: "perception"
        value: 1
        description: "Helps you focus on details when taking notes."

  flashlight:
    id: "flashlight"
    name: "Police Flashlight"
    description: "A heavy-duty flashlight with a strong beam. Perfect for dark corners and night work."
    categories: ["TOOL"] 
    weight: 0.5
    effects:
      - attribute: "perception"
        value: 2
        description: "Illuminates dark areas and helps spot details."

  evidence_bag:
    id: "evidence_bag"
    name: "Evidence Collection Kit"
    description: "A professional kit for collecting and organizing evidence."
    categories: ["CONTAINER"]
    weight: 1.0
    capacity: 5.0
    allowed_categories: ["EVIDENCE"]
    hidden_clues:
      - "There's a Department stamp showing this kit was issued over 5 years ago, though all the supplies look new."
      - "The fingerprint powder appears to be a newer formula than what is standard issue."
    hidden_usage: "You can use the specialized bags to collect trace evidence that would be missed with standard collection techniques."
    perception_difficulty: 10
    wisdom_difficulty: 8

  detective_coat:
    id: "detective_coat"
    name: "Weathered Trench Coat"
    description: "A durable coat with plenty of pockets. Perfect for keeping your notes and small evidence dry."
    categories: ["WEARABLE"]
    slot: "TORSO"
    weight: 2.0
    style_rating: 8
    effects:
      - attribute: "composure"
        value: 2
        description: "The coat's weight provides a grounding presence."
      - attribute: "authority"
        value: 1
        description: "A classic symbol of detective work."
      - attribute: "endurance"
        value: -1
        description: "The heavy coat can be tiring to wear."
    set_id: "detective_suit"
    hidden_lore: "This coat was a gift from your mentor, Chief Detective Henderson, when you made detective. He wore it for 15 years and solved the infamous Harborside Strangler case while wearing it."
    hidden_clues: 
      - "Several of the inner pockets have been modified to be hidden or waterproof."
      - "There's a small bloodstain on the inside lining that's not yours."
    hidden_usage: "The coat's many hidden pockets could be used to conceal small evidence or tools that you don't want others to know you're carrying."
    perception_difficulty: 12
    wisdom_difficulty: 10

  # Wearables - Detective Set
  detective_hat:
    id: "detective_hat"
    name: "Well-Worn Detective's Hat"
    description: "A classic fedora that's seen its share of cases. The brim is perfect for shielding your eyes during long stakeouts."
    categories: ["WEARABLE"]
    slot: "HEAD"
    weight: 0.5
    style_rating: 7
    effects:
      - attribute: "perception"
        value: 1
        description: "The hat's brim helps focus your attention on details."
      - attribute: "authority"
        value: 1
        description: "A symbol of your profession."
    set_id: "detective_suit"


  detective_slacks:
    id: "detective_slacks"
    name: "Professional Slacks"
    description: "Well-pressed pants with subtle pinstripes. They've been through countless stakeouts but still maintain their dignity."
    categories: ["WEARABLE"]
    slot: "LEGS"
    weight: 1.0
    style_rating: 6
    effects:
      - attribute: "composure"
        value: 1
        description: "Looking professional helps maintain composure."
    set_id: "detective_suit"

  detective_shoes:
    id: "detective_shoes"
    name: "Reliable Oxford Shoes"
    description: "Sturdy leather shoes with rubber soles. Good for both chasing suspects and maintaining professional appearance."
    categories: ["WEARABLE"]
    slot: "FEET"
    weight: 1.2
    style_rating: 6
    effects:
      - attribute: "agility"
        value: 1
        description: "Well-broken in and comfortable for running."
      - attribute: "stealth"
        value: -1
        description: "The leather soles can be noisy on hard surfaces."
    set_id: "detective_suit"

  # Casual Wear Set
  worn_jacket:
    id: "worn_jacket"
    name: "Worn Leather Jacket"
    description: "A comfortable jacket that's seen better days. It helps you blend in with the crowd."
    categories: ["WEARABLE"]
    slot: "TORSO"
    weight: 1.5
    style_rating: 5
    effects:
      - attribute: "empathy"
        value: 1
        description: "The casual appearance puts people at ease."
      - attribute: "authority"
        value: -1
        description: "Less intimidating than professional attire."
    set_id: "casual_wear"
    hidden_lore: "This was your go-to jacket during your undercover years. It helped you infiltrate the Eastside Crew and bring down their gun-running operation."
    hidden_clues:
      - "There's a sewn-up knife slash on the left side that you got in a bar fight with a suspect."
      - "The inside pocket has the initials 'C.D.' written in small letters - the alias you used undercover."
    perception_difficulty: 11

  casual_pants:
    id: "casual_pants"
    name: "Comfortable Jeans"
    description: "Well-worn jeans that allow for easy movement."
    categories: ["WEARABLE"]
    slot: "LEGS"
    weight: 0.8
    style_rating: 4
    effects:
      - attribute: "agility"
        value: 1
        description: "Flexible material allows for better movement."
    set_id: "casual_wear"

  sneakers:
    id: "sneakers"
    name: "Quiet Sneakers"
    description: "Rubber-soled shoes perfect for moving silently."
    categories: ["WEARABLE"]
    slot: "FEET"
    weight: 0.7
    style_rating: 3
    effects:
      - attribute: "stealth"
        value: 2
        description: "Soft soles make little noise."
      - attribute: "authority"
        value: -1
        description: "Too casual for formal situations."
    set_id: "casual_wear"

  # Accessories
  lucky_watch:
    id: "lucky_watch"
    name: "Lucky Watch"
    description: "An old watch that's never let you down. Something about it helps you think clearly."
    categories: ["WEARABLE"]
    slot: "ACCESSORY"
    weight: 0.2
    style_rating: 5
    effects:
      - attribute: "logic"
        value: 1
        description: "The rhythmic ticking helps organize your thoughts."
      - attribute: "composure"
        value: 1
        description: "A familiar comfort in stressful situations."
    hidden_lore: "This watch belonged to your father, who was also a detective. He always said it saved his life during the West Side gang wars, but never explained how."
    hidden_clues:
      - "The back panel seems to have a very thin seam that doesn't match the rest of the design."
    hidden_usage: "If you press and hold the winding crown for 5 seconds, the back panel opens to reveal a hidden compartment just large enough for a small key or microfilm."
    perception_difficulty: 15
    wisdom_difficulty: 8

  reading_glasses:
    id: "reading_glasses"
    name: "Reading Glasses"
    description: "Simple reading glasses that help with detailed work."
    categories: ["WEARABLE"]
    slot: "ACCESSORY"
    weight: 0.1
    style_rating: 4
    effects:
      - attribute: "perception"
        value: 2
        description: "Helps spot small details."
      - attribute: "reaction"
        value: -1
        description: "Slightly reduces peripheral vision."

  # Containers
  toolbox:
    id: "toolbox"
    name: "Detective's Toolbox"
    description: "A compact box containing various investigation tools."
    categories: ["CONTAINER"]
    weight: 2.0
    capacity: 8.0
    allowed_categories: ["TOOL"]

  # Consumables
  coffee:
    id: "coffee"
    name: "Thermos of Coffee"
    description: "Hot, black coffee. Helps keep you alert."
    categories: ["CONSUMABLE"]
    weight: 0.5
    stackable: true
    effects:
      - attribute: "perception"
        value: 1
        duration: 30
        description: "The caffeine helps you stay alert."
      - attribute: "composure"
        value: -1
        duration: 30
        description: "Makes you a bit jittery."
    hidden_usage: "You've found that taking a few sips right before questioning a suspect gives you just the right edge of alertness without the full jitters."
    wisdom_difficulty: 6

  painkillers:
    id: "painkillers"
    name: "Painkillers"
    description: "Generic over-the-counter painkillers."
    categories: ["CONSUMABLE"]
    weight: 0.1
    stackable: true
    effects:
      - attribute: "endurance"
        value: 2
        duration: 60
        description: "Helps you push through the pain."
      - attribute: "perception"
        value: -1
        duration: 60
        description: "Slightly dulls your senses."

  # Quest Items
  mysterious_key:
    id: "mysterious_key"
    name: "Tarnished Brass Key"
    description: "An old brass key with no obvious markings. It's unclear what it might open."
    categories: ["QUEST_ITEM"]
    weight: 0.1
    hidden_lore: "This style of key was commonly used for security deposit boxes at First National Bank during the 1980s."
    hidden_clues:
      - "There's a tiny engraving on the shaft that reads 'Box 447'"
      - "The wear pattern suggests it's been used frequently, but not recently"
      - "There are faint traces of a blue substance in the grooves"
    hidden_usage: "The unusual size and pattern suggests it might fit older security boxes or safes rather than standard door locks."
    perception_difficulty: 14
    wisdom_difficulty: 11

  torn_photograph:
    id: "torn_photograph"
    name: "Torn Photograph"
    description: "A photograph torn in half. It shows part of a warehouse and what might be a person's arm."
    categories: ["EVIDENCE", "QUEST_ITEM"]
    weight: 0.05
    hidden_clues:
      - "In the background, barely visible, is a sign with partial text '...RBOR 7'"
      - "The lighting and shadows suggest the photo was taken at dusk"
      - "There's a date stamp on the back from 3 years ago"
    perception_difficulty: 12

  # Items for the Analytical Detective
  magnifying_glass:
    id: "magnifying_glass"
    name: "Detective's Magnifying Glass"
    description: "A high-quality magnifying glass for examining evidence in detail."
    categories: ["TOOL"]
    weight: 0.2
    effects:
      - attribute: "perception"
        value: 2
        description: "Allows you to see small details that would otherwise be missed."
      - attribute: "logic"
        value: 1
        description: "Helps you analyze evidence methodically."
    hidden_lore: "This magnifying glass was handed down from Detective Morrison, known for solving the infamous Series Six murders using nothing but trace evidence analysis."

  crime_scene_kit:
    id: "crime_scene_kit"
    name: "Forensic Analysis Kit"
    description: "A comprehensive kit containing tools for collecting and analyzing evidence at crime scenes."
    categories: ["TOOL", "CONTAINER"]
    weight: 1.5
    capacity: 3.0
    effects:
      - attribute: "logic"
        value: 2
        description: "Provides scientific tools for evidence analysis."
      - attribute: "memory"
        value: 1
        description: "The systematic approach helps catalog details for later recall."
    hidden_usage: "The kit includes specialized reagents that can reveal latent fingerprints and chemical traces invisible to the naked eye."
    perception_difficulty: 12
    wisdom_difficulty: 8

  # Items for the Persuasive Detective
  professional_attire:
    id: "professional_attire"
    name: "Tailored Detective Suit"
    description: "A perfectly tailored suit that commands respect and attention."
    categories: ["WEARABLE"]
    slot: "TORSO"
    weight: 1.8
    style_rating: 9
    effects:
      - attribute: "authority"
        value: 2
        description: "Projects an air of professionalism and competence."
      - attribute: "suggestion"
        value: 1
        description: "People tend to trust well-dressed professionals."
      - attribute: "agility"
        value: -1
        description: "The formal attire restricts your movement slightly."
    set_id: "professional_set"

  confidence_charm:
    id: "confidence_charm"
    name: "Lucky Detective's Charm"
    description: "A small medallion that you've carried through countless interrogations. It gives you confidence."
    categories: ["WEARABLE"]
    slot: "ACCESSORY"
    weight: 0.1
    effects:
      - attribute: "suggestion"
        value: 2
        description: "The confidence it provides makes your suggestions more compelling."
      - attribute: "empathy"
        value: 1
        description: "The comfort it provides helps you focus on others' emotions."
    hidden_lore: "This charm belonged to the legendary negotiator Captain Reynolds who talked down 27 hostage situations without a single casualty."

  voice_recorder:
    id: "voice_recorder"
    name: "Digital Voice Recorder"
    description: "A high-quality digital recorder for capturing interviews and ambient sounds."
    categories: ["TOOL"]
    weight: 0.3
    effects:
      - attribute: "memory"
        value: 1
        description: "Allows you to review conversations for missed details."
      - attribute: "empathy"
        value: 1
        description: "Listening to recorded voices helps you catch emotional undertones."
    hidden_usage: "The recorder has a special frequency setting that can pick up whispers from up to 20 feet away."
    perception_difficulty: 10

  # Items for the Field Detective
  sturdy_boots:
    id: "sturdy_boots"
    name: "Tactical Field Boots"
    description: "Tough, waterproof boots with excellent traction and ankle support."
    categories: ["WEARABLE"]
    slot: "FEET"
    weight: 1.4
    style_rating: 4
    effects:
      - attribute: "agility"
        value: 2
        description: "Provides excellent grip and support for running and climbing."
      - attribute: "endurance"
        value: 1
        description: "Reduces foot fatigue during long periods of standing or walking."
      - attribute: "stealth"
        value: -1
        description: "The heavy soles can make some noise on hard surfaces."
    set_id: "field_set"

  weatherproof_jacket:
    id: "weatherproof_jacket"
    name: "All-Weather Field Jacket"
    description: "A durable jacket that protects against rain, wind, and cold while providing ample pocket space."
    categories: ["WEARABLE"]
    slot: "TORSO"
    weight: 1.7
    style_rating: 5
    effects:
      - attribute: "endurance"
        value: 2
        description: "Protects against the elements, allowing you to work in harsh conditions."
      - attribute: "composure"
        value: 1
        description: "The comfort it provides helps you stay focused in stressful situations."
    set_id: "field_set"
    hidden_clues:
      - "The inside pocket has a waterproof lining perfect for storing evidence in wet conditions."

  first_aid_kit:
    id: "first_aid_kit"
    name: "Tactical First Aid Kit"
    description: "A compact but comprehensive first aid kit for emergency treatment in the field."
    categories: ["TOOL", "CONSUMABLE"]
    weight: 0.8
    stackable: true
    quantity: 1
    effects:
      - attribute: "composure"
        value: 1
        description: "Having medical supplies on hand helps you stay calm in emergencies."
    hidden_usage: "Contains specialized items for treating wounds that aren't in standard first aid kits."
    perception_difficulty: 8

inner_voices:

thoughts:

locations:
  warehouse_entrance:
    id: "warehouse_entrance"
    name: "Warehouse Entrance"
    description: "A imposing metal door stands before you, its surface marked by years of use. The surrounding concrete walls are covered in faded graffiti. The air smells of rust and distant sea salt."
    available_actions:
      - name: "inspect_door"
        description: "Examine the warehouse door closely"
        requirements:
          perception: 8
        consequences:
          - event_type: "AddClue"
            data:
              id: "scratch_marks"
              description: "Recent scratch marks around the lock suggest forced entry"
              related_quest: "main_investigation"
              discovered: false
    connected_locations:
      - "warehouse_office"
      - "parking_lot"
      - "town_square" # Added connection to town for quest accessibility

  warehouse_office:
    id: "warehouse_office"
    name: "Security Office"
    description: "A small, cluttered office with monitors showing security feeds. Coffee cups and old newspapers litter the desk. The night shift log book lies open."
    available_actions:
      - name: "check_logbook"
        description: "Review the security log book"
        requirements:
          logic: 7
        consequences:
          - event_type: "AddClue"
            data:
              id: "night_shift_anomaly"
              description: "The night guard's last entry stops mid-sentence"
              related_quest: "main_investigation"
              discovered: false
    connected_locations:
      - "warehouse_entrance"

  # Added locations for the missing locket quest
  town_square:
    id: "town_square"
    name: "Town Square"
    description: "The heart of the town with a beautiful central fountain. People gather here to socialize and relax. The square is lined with benches and decorative plantings. Recently, a festival was held here."
    available_actions:
      - name: "search_fountain"
        description: "Search around the fountain area"
        requirements:
          perception: 7
        consequences:
          - event_type: "AddClue"
            data:
              id: "locket_clue"
              description: "You found a thread that might have come from the locket's chain."
              related_quest: "missing_locket"
              discovered: true
    connected_locations:
      - "warehouse_entrance"
      - "market"
      - "garden"

  market:
    id: "market"
    name: "Market"
    description: "A bustling marketplace with various stalls selling fresh produce, crafts, and trinkets. The air is filled with the mingling aromas of spices, flowers, and street food."
    available_actions:
      - name: "browse_stalls"
        description: "Look through the market stalls"
        requirements: {}
        consequences: []
    connected_locations:
      - "town_square"
      - "garden"

  garden:
    id: "garden"
    name: "Garden"
    description: "A serene public garden with winding paths, vibrant flower beds, and shady trees. A popular spot for relaxation and contemplation. Children sometimes play hide and seek among the shrubs."
    available_actions:
      - name: "search_garden"
        description: "Search the garden thoroughly"
        requirements:
          perception: 6
        consequences:
          - event_type: "AddItem"
            data:
              id: "silver_locket"
              name: "Silver Locket"
              description: "A beautiful silver locket with intricate engravings. It contains a small portrait inside."
              effects: {}
    connected_locations:
      - "town_square"
      - "market"

  # Required for the quest but not explicitly described
  parking_lot:
    id: "parking_lot"
    name: "Parking Lot"
    description: "A modest parking area serving the warehouse district. Oil stains mark the cracked asphalt, and a few vehicles are parked haphazardly."
    available_actions: []
    connected_locations:
      - "warehouse_entrance"

npcs:
  guard_martinez:
    id: "guard_martinez"
    name: "Officer Martinez"
    dialogue_entry_point: "martinez_intro"
    disposition: 50
    location: "warehouse_office"
    gender: "male"

  worker_chen:
    id: "worker_chen"
    name: "Sarah Chen"
    dialogue_entry_point: "chen_intro"
    disposition: 65
    location: "warehouse_entrance"
    gender: "female"

  # Added NPCs for the missing locket quest
  eliza:
    id: "eliza"
    name: "Eliza"
    dialogue_entry_point: "eliza_default"
    disposition: 60
    location: "town_square"
    gender: "female"

  shopkeeper:
    id: "shopkeeper"
    name: "Mr. Harrison"
    dialogue_entry_point: "shopkeeper_default"
    disposition: 50
    location: "market"
    gender: "male"

  gardener:
    id: "gardener"
    name: "Old Tom"
    dialogue_entry_point: "gardener_default"
    disposition: 55
    location: "garden"
    gender: "male"

  merchant:
    id: "merchant"
    name: "Maya"
    dialogue_entry_point: "merchant_default"
    disposition: 45
    location: "market"
    gender: "female"

dialogue_trees:
  martinez_intro:
    id: "martinez_intro"
    text: "What are you doing here? This is a restricted area."
    speaker: "guard_martinez"
    emotional_state: "Suspicious"
    inner_voice_comments:
      - voice_type: "Empathy"
        text: "His posture is defensive, but there's worry in his eyes. Something's eating at him."
        skill_requirement: 8
      - voice_type: "Authority"
        text: "He's testing your authority. Stand your ground."
        skill_requirement: 7
    options:
      - id: "show_badge"
        text: "Show your badge: 'Detective from the 41st precinct. We received reports of suspicious activity.'"
        skill_check:
          base_difficulty: 12
          primary_skill: "authority"
          supporting_skills:
            - ["composure", 0.5]
          emotional_modifiers:
            Suspicious: -2
          white_check: false
          hidden: false
        emotional_impact:
          Friendly: 2
          Suspicious: -3
        conditions:
          any_of:
            - required_items: ["police_badge"]
            - worn_items: ["police_badge"]
            - required_items_any_inventory: ["police_badge"]
          required_skills:
            authority: 8
        next_node: "martinez_cooperative"

      - id: "casual_approach"
        text: "Play it casual: 'Just looking around. Noticed some unusual activity in the area.'"
        skill_check:
          base_difficulty: 10
          primary_skill: "suggestion"
          supporting_skills:
            - ["empathy", 0.3]
          emotional_modifiers:
            Suspicious: -1
          white_check: true
          hidden: false
        next_node: ""
        success_node: "martinez_cooperative"
        failure_node: "martinez_suspicious"
        critical_success_node: "martinez_impressed"
        critical_failure_node: "martinez_attacks"

      - id: "test"
        text: "A test dialogue option."
        skill_check:
          base_difficulty: 10
          primary_skill: "suggestion"
          supporting_skills:
            - ["empathy", 0.3]
          emotional_modifiers:
            Suspicious: -1
          white_check: true
          hidden: false
        next_node: "martinez_cooperative"

  martinez_cooperative:
    id: "martinez_cooperative"
    text: "Oh, thank god. Look, detective, something weird's been going on here. The night shift logs don't add up, and I found this yesterday..."
    speaker: "guard_martinez"
    emotional_state: "Friendly"
    inner_voice_comments:
      - voice_type: "Logic"
        text: "He's been gathering evidence. This could be valuable for the investigation."
        skill_requirement: 6
    options:
      - id: "examine_evidence"
        text: "Examine what he's found"
        next_node: "martinez_evidence"

  martinez_suspicious:
    id: "martinez_suspicious"
    text: "Nice try, criminal!"
    speaker: "Officer Martinez"
    emotional_state: "Angry"
    inner_voice_comments: []
    options: []

  martinez_evidence:
    id: "martinez_evidence"
    text: "Here, take a look at this manifest. The numbers don't match our inventory."
    speaker: "guard_martinez"
    emotional_state: "Nervous"
    inner_voice_comments: []
    options:
      - id: "thank_martinez"
        text: "Thank you, this is valuable evidence."
        next_node: ""
        consequences:
        - effect_type: "quest"
          data:
            action: "complete_objective"
            quest_id: "main_investigation"
            objective_id: "initial_investigation"
        - effect_type: "clue"
          data:
            action: "add"
            clue_id: "warehouse_manifest"
            description: "A manifest showing inventory discrepancies at the warehouse"

  # New conditional friendly entry point for Officer Martinez
  martinez_friendly:
    id: "martinez_friendly"
    text: "Hey there, detective! Good to see you again. What brings you back to our neck of the woods?"
    speaker: "guard_martinez"
    emotional_state: "Friendly"
    conditions:
      npc_relationship_value: 
        npc_id: "guard_martinez"
        min_value: 70
    inner_voice_comments:
      - voice_type: "Empathy"
        text: "He's genuinely happy to see you. Your previous interactions have built trust."
        skill_requirement: 5
    options:
      - id: "friendly_chat"
        text: "Just checking in. How have things been since I was last here?"
        next_node: "martinez_friendly_chat"
      - id: "official_business"
        text: "I'm here on official business. Anything unusual happen recently?"
        next_node: "martinez_reports"

  martinez_friendly_chat:
    id: "martinez_friendly_chat"
    text: "Much better since you helped us sort out that inventory discrepancy. Management actually implemented some of your suggestions for security. Makes my job a lot easier."
    speaker: "guard_martinez"
    emotional_state: "Relaxed"
    inner_voice_comments:
      - voice_type: "Logic"
        text: "This is a good opportunity to gather information informally."
        skill_requirement: 6
    options:
      - id: "ask_personal"
        text: "Glad to hear it. How's the family doing?"
        emotional_impact:
          Friendly: 1
        next_node: "martinez_personal"
      - id: "transition_to_business"
        text: "Good to hear. Actually, I was hoping to ask about something specific."
        next_node: "martinez_reports"

  martinez_personal:
    id: "martinez_personal"
    text: "They're good, thanks for asking! My daughter just started college - first one in the family. Pretty proud of her."
    speaker: "guard_martinez"
    emotional_state: "Proud"
    options:
      - id: "congratulate"
        text: "That's fantastic! What's she studying?"
        emotional_impact:
          Friendly: 2
        next_node: "martinez_personal_followup"
      - id: "transition_to_business"
        text: "That's great to hear. Listen, I actually came by to ask about something specific."
        next_node: "martinez_reports"

  martinez_personal_followup:
    id: "martinez_personal_followup"
    text: "Criminal Justice, if you can believe it! Says she wants to be a detective like you someday. Your work here made quite an impression on her."
    speaker: "guard_martinez"
    emotional_state: "Proud"
    options:
      - id: "offer_mentorship"
        text: "I'd be happy to talk with her sometime about the job. Maybe give her some pointers."
        emotional_impact:
          Friendly: 3
        next_node: "martinez_grateful"
      - id: "transition_to_business"
        text: "That's flattering. By the way, I came here about a case I'm working on."
        next_node: "martinez_reports"

  martinez_grateful:
    id: "martinez_grateful"
    text: "Really? That would mean the world to her. And to me. Thanks, detective. Now, what can I help you with today?"
    speaker: "guard_martinez"
    emotional_state: "Grateful"
    options:
      - id: "explain_visit"
        text: "I'm investigating some suspicious activity in the area. Notice anything unusual lately?"
        next_node: "martinez_reports"

  martinez_reports:
    id: "martinez_reports"
    text: "Well, now that you mention it, there have been some strange deliveries after hours. Not logged in the system. I started keeping my own records after what happened last time."
    speaker: "guard_martinez"
    emotional_state: "Helpful"
    inner_voice_comments:
      - voice_type: "Logic"
        text: "He's been proactive about security issues. This could be valuable intelligence."
        skill_requirement: 7
    options:
      - id: "ask_for_records"
        text: "Can I see these records? They might be important for my investigation."
        next_node: "martinez_gives_evidence"
        
  martinez_gives_evidence:
    id: "martinez_gives_evidence"
    text: "Sure thing. Here's my personal log. I've highlighted the suspicious entries."
    speaker: "guard_martinez"
    emotional_state: "Helpful"
    options:
      - id: "thank_for_help"
        text: "Thanks for your help, Martinez. This could be a big break in the case."
        emotional_impact:
          Friendly: 2
        next_node: ""
        consequences:
          - effect_type: "clue"
            data:
              action: "add"
              clue_id: "martinez_delivery_log"
              description: "Officer Martinez's personal log of suspicious after-hours deliveries"
              
  # New entry point for when player has already gone through the evidence
  martinez_quest_complete:
    id: "martinez_quest_complete"
    text: "Detective! Back so soon? Have you made progress on the case?"
    speaker: "guard_martinez"
    emotional_state: "Curious"
    conditions:
      quest_objective_completed:
        quest_id: "main_investigation"
        objective_id: "initial_investigation"
    options:
      - id: "share_progress"
        text: "We're getting closer. Your evidence has been very helpful."
        emotional_impact:
          Friendly: 1
        next_node: "martinez_pleased"
      - id: "ask_more_questions"
        text: "I have a few more questions about those deliveries you mentioned."
        next_node: "martinez_more_info"
        
  martinez_pleased:
    id: "martinez_pleased"
    text: "Glad I could help. Let me know if you need anything else."
    speaker: "guard_martinez"
    emotional_state: "Pleased"
    options:
      - id: "goodbye"
        text: "Will do. Thanks again."
        next_node: ""

  martinez_more_info:
    id: "martinez_more_info"
    text: "Of course. What else would you like to know?"
    speaker: "guard_martinez"
    emotional_state: "Helpful"
    options:
      - id: "ask_about_drivers"
        text: "Did you notice anything about the delivery drivers? Any distinctive features?"
        next_node: "martinez_describes_drivers"
      - id: "ask_about_timing"
        text: "Is there a pattern to when these deliveries happen?"
        next_node: "martinez_timing_info"
        
  martinez_describes_drivers:
    id: "martinez_describes_drivers"
    text: "Now that you mention it, they always wear caps pulled down low. And they use a different truck each time - but I noticed they all have the same parking sticker on the windshield."
    speaker: "guard_martinez"
    emotional_state: "Thoughtful"
    options:
      - id: "thank_for_detail"
        text: "That's exactly the kind of detail I needed. Thanks for your observant eye."
        emotional_impact:
          Friendly: 2
        next_node: ""
        consequences:
          - effect_type: "clue"
            data:
              action: "add"
              clue_id: "delivery_truck_sticker"
              description: "All suspicious deliveries use trucks with the same parking sticker"
              
  martinez_timing_info:
    id: "martinez_timing_info"
    text: "They always come after midnight, usually around 2AM. And only on weekdays, never weekends."
    speaker: "guard_martinez"
    emotional_state: "Helpful"
    options:
      - id: "thank_for_info"
        text: "That's valuable information. I might need to stake out the place."
        next_node: ""
        consequences:
          - effect_type: "clue"
            data:
              action: "add"
              clue_id: "delivery_timing"
              description: "Suspicious deliveries occur at 2AM on weekdays only"

  martinez_impressed:
    id: "martinez_impressed"
    text: "Wow, I completely believe you! In fact, I've been noticing suspicious activity too. Here, I've been keeping detailed notes that might help your investigation."
    speaker: "guard_martinez"
    emotional_state: "Excited"
    inner_voice_comments:
      - voice_type: "Logic"
        text: "That was an amazing performance. He's not just convinced - he's eager to help."
        skill_requirement: 3
    options:
      - id: "accept_notes"
        text: "These are incredibly detailed. Thank you, this is exactly what I needed."
        next_node: ""
        consequences:
          - effect_type: "relationship"
            data:
              npc_id: "guard_martinez"
              value: 15
          - effect_type: "clue"
            data:
              action: "add"
              clue_id: "martinez_detailed_notes"
              description: "Detailed notes about suspicious warehouse activities collected by Officer Martinez"
          - effect_type: "quest"
            data:
              action: "complete_objective"
              quest_id: "main_investigation" 
              objective_id: "gather_initial_evidence"

  martinez_attacks:
    id: "martinez_attacks"
    text: "That's the worst lie I've ever heard! You're clearly involved with the smuggling operation! Put your hands up NOW!"
    speaker: "guard_martinez"
    emotional_state: "Furious"
    inner_voice_comments:
      - voice_type: "Composure"
        text: "This situation has escalated dangerously. Stay calm and don't make sudden movements."
        skill_requirement: 4
    options:
      - id: "show_badge_quickly"
        text: "Wait! I'm a detective! *quickly show badge*"
        skill_check:
          base_difficulty: 8
          primary_skill: "composure"
          supporting_skills:
            - ["agility", 0.5]
          white_check: false
        conditions:
          any_of:
            - required_items: ["police_badge"]
            - worn_items: ["police_badge"] 
            - required_items_any_inventory: ["police_badge"]
        next_node: "martinez_embarrassed"
      - id: "surrender"
        text: "I'm cooperating. Let's talk this through calmly."
        next_node: "martinez_detains_you"
        consequences:
          - effect_type: "relationship"
            data:
              npc_id: "guard_martinez"
              value: -10

  martinez_embarrassed:
    id: "martinez_embarrassed"
    text: "Oh god, I'm so sorry Detective! I completely overreacted. Please don't report this incident. I've been on edge with all these security breaches."
    speaker: "guard_martinez"
    emotional_state: "Embarrassed"
    inner_voice_comments:
      - voice_type: "Empathy"
        text: "He's genuinely mortified and afraid for his job."
        skill_requirement: 5
    options:
      - id: "forgive"
        text: "It's fine, Officer Martinez. Security is important. Why don't we start over?"
        emotional_impact:
          Friendly: 1
        next_node: "martinez_relieved"
      - id: "stern"
        text: "That was extremely unprofessional. I'll overlook it this time, but I need information now."
        emotional_impact:
          Nervous: 2
        next_node: "martinez_nervous_info"

  martinez_detains_you:
    id: "martinez_detains_you"
    text: "Down on the ground! Now! *He calls for backup* Central, I've apprehended a suspicious individual attempting to access the warehouse..."
    speaker: "guard_martinez"
    emotional_state: "Alert"
    inner_voice_comments:
      - voice_type: "Logic"
        text: "This is going to be awkward to explain to the precinct."
        skill_requirement: 3
    options:
      - id: "wait_for_backup"
        text: "Comply and wait for backup to arrive to sort this out"
        next_node: "martinez_backup_arrives"
        consequences:
          - effect_type: "time"
            data:
              hours: 3
          - effect_type: "relationship"
            data:
              npc_id: "chief_wilson"
              value: -5

  martinez_relieved:
    id: "martinez_relieved"
    text: "Thank you, Detective. I really appreciate your understanding. What can I do to help your investigation?"
    speaker: "guard_martinez"
    emotional_state: "Relieved"
    options:
      - id: "ask_about_warehouse"
        text: "Tell me about any unusual activities you've noticed at the warehouse."
        next_node: "martinez_cooperative"

  martinez_nervous_info:
    id: "martinez_nervous_info"
    text: "Y-yes, of course, Detective. I want to be helpful. What do you need to know?"
    speaker: "guard_martinez"
    emotional_state: "Nervous"
    options:
      - id: "ask_about_warehouse"
        text: "Tell me about any unusual activities you've noticed at the warehouse."
        next_node: "martinez_cooperative"

  martinez_backup_arrives:
    id: "martinez_backup_arrives"
    text: "Detective! What the hell is going on here? Martinez, why is one of our detectives in cuffs?"
    speaker: "sergeant_brooks"
    emotional_state: "Angry"
    inner_voice_comments:
      - voice_type: "Authority"
        text: "This is a perfect opportunity to assert your authority and put Martinez in his place."
        skill_requirement: 6
    options:
      - id: "explain_calmly"
        text: "There was a misunderstanding. Officer Martinez was just doing his job."
        emotional_impact:
          Friendly: 2
        next_node: "martinez_grateful_backup"
      - id: "blame_martinez"
        text: "Ask your officer why he didn't verify my credentials before drawing his weapon."
        emotional_impact:
          Embarrassed: 3
        next_node: "martinez_reprimanded"

  martinez_grateful_backup:
    id: "martinez_grateful_backup"
    text: "You're free to go, Detective. Martinez, be more careful next time. Sorry about this mix-up."
    speaker: "sergeant_brooks"
    emotional_state: "Apologetic"
    inner_voice_comments: []
    options:
      - id: "continue_investigation"
        text: "Thank you, Sergeant. Officer Martinez, let's start our conversation over."
        next_node: "martinez_cooperative"
        consequences:
          - effect_type: "relationship"
            data:
              npc_id: "guard_martinez"
              value: 5

  martinez_reprimanded:
    id: "martinez_reprimanded"
    text: "Martinez! Is this true? We've talked about this! Detectives wear plainclothes - you have to check IDs! Consider yourself on report. Detective, you're free to go. I apologize for my officer's behavior."
    speaker: "sergeant_brooks"
    emotional_state: "Angry"
    inner_voice_comments:
      - voice_type: "Empathy"
        text: "Martinez looks devastated. This might actually cost him his job."
        skill_requirement: 5
    options:
      - id: "ease_reprimand"
        text: "Actually, Sergeant, it was partly my fault. I should have identified myself clearly."
        emotional_impact:
          Grateful: 3
        next_node: "martinez_deeply_grateful"
        consequences:
          - effect_type: "relationship"
            data:
              npc_id: "guard_martinez"
              value: 15
      - id: "continue_investigation"
        text: "Thank you, Sergeant. Officer Martinez, I still need information about the warehouse."
        next_node: "martinez_cooperative"
        consequences:
          - effect_type: "relationship"
            data:
              npc_id: "guard_martinez"
              value: -10

  martinez_deeply_grateful:
    id: "martinez_deeply_grateful"
    text: "Thank you so much, Detective. I thought my career was over. I'll do anything to help your investigation."
    speaker: "guard_martinez"
    emotional_state: "Grateful"
    inner_voice_comments:
      - voice_type: "Logic"
        text: "You've earned his loyalty. He'll be a valuable ally in this investigation."
        skill_requirement: 3
    options:
      - id: "ask_for_help"
        text: "I need information about suspicious activities at the warehouse."
        next_node: "martinez_special_intel"
        
  martinez_special_intel:
    id: "martinez_special_intel"
    text: "Detective, I've been keeping secret records of everything suspicious. I was afraid to show them to anyone in case they were involved. But I trust you now. Here's everything - schedules, license plates, photos..."
    speaker: "guard_martinez"
    emotional_state: "Relieved"
    options:
      - id: "thank_martinez"
        text: "This is incredible, Martinez. You might have just broken this case wide open."
        next_node: ""
        consequences:
          - effect_type: "clue"
            data:
              action: "add"
              clue_id: "martinez_secret_evidence"
              description: "Comprehensive evidence package about warehouse irregularities, including photos and license plates"
          - effect_type: "quest"
            data:
              action: "complete_objective"
              quest_id: "main_investigation"
              objective_id: "gather_initial_evidence"
          - effect_type: "relationship"
            data:
              npc_id: "guard_martinez"
              value: 10

  chen_default:
    id: "chen_default"
    text: "Can I help you? I'm just finishing my shift..."
    speaker: "worker_chen"
    emotional_state: "Nervous"
    inner_voice_comments:
      - voice_type: "Intuition"
        text: "She keeps glancing at the loading bay. Something there she doesn't want you to see?"
        skill_requirement: 7
    options:
      - id: "casual_question"
        text: "Ask about her shift: 'Long night?'"
        skill_check:
          base_difficulty: 8
          primary_skill: "empathy"
          white_check: true
          hidden: false
        next_node: "chen_smalltalk"

  chen_smalltalk:
    id: "chen_smalltalk"
    text: "Yeah, you could say that. Just ready to go home and sleep. I still have a lot of work to finish before my shift ends though..."
    speaker: "worker_chen"
    emotional_state: "Neutral"
    inner_voice_comments: []
    options:
      - id: "ask_about_warehouse"
        text: "Ask if she's noticed anything unusual at the warehouse lately."
        next_node: ""
      - id: "offer_help"
        text: "I could help you finish your work if you'd like."
        skill_check:
          base_difficulty: 8
          primary_skill: "empathy"
          white_check: true
          hidden: false
        consequences:
          - effect_type: "quest"
            data:
              action: "start"
              quest_id: "chen_shift_help"
          - effect_type: "quest"
            data:
              action: "start"
              quest_id: "chen_shift_help"
        next_node: "chen_accepts_help"
        inner_voice_reactions:
          - voice_type: "Empathy"
            text: "She seems genuinely stressed. Helping her could build trust."
            trigger_condition: null
            skill_requirement: 5

  chen_accepts_help:
    id: "chen_accepts_help"
    text: "Really? That would be amazing! I'm so behind on inventory checks. If you could help me with that, I'd be so grateful."
    speaker: "worker_chen"
    emotional_state: "Friendly"
    inner_voice_comments: []
    options:
      - id: "start_helping"
        text: "Let's get started then. What needs to be done?"
        next_node: ""
        consequences:
          - effect_type: "quest"
            data:
              action: "advance"
              quest_id: "chen_shift_help"
              stage_id: "help_chen"

  # Added dialogue trees from the quest-dialogue.txt
  eliza_default:
    id: "eliza_default"
    text: "Hello there. It's nice to meet you, though I'm afraid I'm a bit distracted at the moment."
    speaker: "eliza"
    emotional_state: "Nervous"
    inner_voice_comments:
      - voice_type: "Empathy"
        text: "She seems upset about something. Maybe I should ask what's wrong."
        trigger_condition: null
        skill_requirement: 5
    options:
      - id: "ask_problem"
        text: "You seem troubled. Is everything alright?"
        skill_check: null
        emotional_impact:
          Friendly: 1
        conditions:
          required_quests: {}
        consequences: []
        next_node: "eliza_explains_problem"
        inner_voice_reactions: []

      - id: "ignore_problem"
        text: "Nice to meet you too. I'll let you get back to whatever you were doing."
        skill_check: null
        emotional_impact:
          Neutral: 0
        conditions:
          required_quests: {}
        consequences: []
        next_node: ""
        inner_voice_reactions:
          - voice_type: "Empathy"
            text: "You're walking away from someone who clearly needs help..."
            trigger_condition: null
            skill_requirement: 3

  eliza_explains_problem:
    id: "eliza_explains_problem"
    text: "I've lost my grandmother's locket. It's the only thing I have to remember her by. I've looked everywhere, but I can't find it."
    speaker: "eliza"
    emotional_state: "Neutral"
    inner_voice_comments: []
    options:
      - id: "offer_help"
        text: "I'd be happy to help you look for it. Where did you last see it?"
        skill_check: null
        emotional_impact:
          Friendly: 2
        conditions:
          required_quests: {}
        consequences:
          - effect_type: "quest"
            data:
              action: "start"
              quest_id: "missing_locket"
        next_node: "eliza_gives_info"
        inner_voice_reactions:
          - voice_type: "Logic"
            text: "This is a good opportunity to learn more about the town."
            trigger_condition: null
            skill_requirement: null

      - id: "decline_help"
        text: "That's unfortunate. Hope you find it soon."
        skill_check: null
        emotional_impact:
        conditions:
          required_quests: {}
        consequences:
        next_node: ""
        inner_voice_reactions: []

  eliza_gives_info:
    id: "eliza_gives_info"
    text: "Thank you so much! I was last wearing it in the town square during the festival yesterday. I remember touching it near the fountain, but after that... it was just gone when I got home."
    speaker: "eliza"
    emotional_state: "Friendly"
    inner_voice_comments: []
    options:
      - id: "investigate_square"
        text: "I'll start by checking the town square then. What does the locket look like?"
        skill_check: null
        emotional_impact:
          Friendly: 1
        conditions:
          required_quests: {}
        consequences: []
        next_node: "eliza_describes_locket"
        inner_voice_reactions: []

  eliza_describes_locket:
    id: "eliza_describes_locket"
    text: "It's silver with intricate vine patterns on the outside. Inside is a small portrait of my grandmother. It's about this big and hangs on a thin silver chain. Please find it, it means the world to me."
    speaker: "eliza"
    emotional_state: "Friendly"
    inner_voice_comments: []
    options:
      - id: "promise_help"
        text: "I'll do my best to find it for you."
        skill_check: null
        emotional_impact:
          Friendly: 1
        conditions:
          required_quests: {}
        consequences:
        next_node: ""
        inner_voice_reactions: []

  eliza_return_locket:
    id: "eliza_return_locket"
    text: "Oh! Did you find anything?"
    speaker: "eliza"
    emotional_state: "Friendly"
    inner_voice_comments: []
    options:
      - id: "give_locket"
        text: "I found your locket. Here it is."
        skill_check: null
        emotional_impact:
          Friendly: 5
        conditions:
          any_of:
            - required_items: ["silver_locket"]
            - worn_items: ["silver_locket"]
            - required_items_any_inventory: ["silver_locket"]
          required_quests:
            "missing_locket": "InProgress"
        consequences:
        next_node: "eliza_grateful"

      - id: "still_looking"
        text: "Not yet, but I'm still looking."
        skill_check: null
        emotional_impact:
        conditions:
          required_quests:
            "missing_locket": "InProgress"
        consequences: []
        next_node: "eliza_still_hopeful"
        inner_voice_reactions: []

  eliza_grateful:
    id: "eliza_grateful"
    text: "Oh my goodness! You found it! Thank you, thank you so much! This means everything to me. Please, take this charm as a token of my gratitude. It's not much, but it's said to bring good fortune to those who help others."
    speaker: "eliza"
    emotional_state: "Friendly"
    inner_voice_comments:
      - voice_type: "Empathy"
        text: "Her joy is palpable. It feels good to have helped her."
        trigger_condition: null
        skill_requirement: 5
    options:
      - id: "accept_gratefully"
        text: "You're welcome. I'm glad I could help you."
        skill_check: null
        emotional_impact:
          Friendly: 2
        conditions:
          required_quests: {}
        consequences:

  eliza_still_hopeful:
    id: "eliza_still_hopeful"
    text: "Oh... I see. Well, please keep looking. That locket means everything to me."
    speaker: "eliza"
    emotional_state: "Desperate"
    inner_voice_comments: []
    options:
      - id: "reassure"
        text: "Don't worry, I won't give up until I find it."
        skill_check: null
        emotional_impact:
          Friendly: 1
        conditions:
          required_quests: {}
        consequences:
        next_node: ""
        inner_voice_reactions: []

  # New conditional entry point for when the player has found the locket
  eliza_found_locket:
    id: "eliza_found_locket"
    text: "Oh! You're back! Have you found anything?"
    speaker: "eliza"
    emotional_state: "Hopeful"
    conditions:
      any_of:
        - required_items: ["silver_locket"]
        - worn_items: ["silver_locket"]
        - required_items_any_inventory: ["silver_locket"]
      required_quests:
        "missing_locket": "InProgress"
    options:
      - id: "give_locket"
        text: "I found your locket. Here it is."
        emotional_impact:
          Friendly: 5
        conditions: {}
        consequences:
          - effect_type: "quest"
            data:
              action: "complete_objective"
              quest_id: "missing_locket"
              objective_id: "return_locket"
          - effect_type: "item"
            data:
              action: "remove"
              item_id: "silver_locket"
          - effect_type: "quest"
            data:
              action: "add"
              quest_id: "eliza_friendship"
        next_node: "eliza_grateful"

  # New conditional entry point for after the player has already returned the locket
  eliza_after_locket:
    id: "eliza_after_locket"
    text: "Hello again! Thanks to you, I can wear my grandmother's locket every day now. I'm so grateful for your help."
    speaker: "eliza"
    emotional_state: "Friendly"
    conditions:
      quest_objective_completed:
        quest_id: "missing_locket"
        objective_id: "return_locket"
    options:
      - id: "ask_about_grandmother"
        text: "Tell me more about your grandmother."
        next_node: "eliza_grandmother_story"
      - id: "friendly_goodbye"
        text: "I'm glad I could help. Have a nice day!"
        next_node: ""

  eliza_grandmother_story:
    id: "eliza_grandmother_story"
    text: "She was an amazing woman. Tough but kind. This locket was the only thing she had from her own mother. It's been passed down for generations."
    speaker: "eliza"
    emotional_state: "Nostalgic"
    inner_voice_comments:
      - voice_type: "Empathy"
        text: "Family heirlooms can carry powerful emotional connections."
        skill_requirement: 7
    options:
      - id: "appreciate_story"
        text: "That's a beautiful legacy. I'm honored to have helped preserve it."
        emotional_impact:
          Friendly: 1
        next_node: ""

  shopkeeper_default:
    id: "shopkeeper_default"
    text: "Welcome to my shop. Looking for something specific today?"
    speaker: "shopkeeper"
    emotional_state: "Neutral"
    inner_voice_comments: []
    options:
      - id: "ask_about_locket"
        text: "I'm looking for a silver locket. Have you seen anyone with one recently?"
        skill_check: null
        emotional_impact:
          Neutral: 0
        conditions:
          required_quests:
            "missing_locket": "InProgress"
        consequences:
        next_node: "shopkeeper_info"
        inner_voice_reactions: []

      - id: "just_browsing"
        text: "Just browsing, thanks."
        skill_check: null
        emotional_impact:
          Neutral: 0
        conditions:
          required_quests: {}
        consequences: []
        next_node: ""
        inner_voice_reactions: []

  shopkeeper_info:
    id: "shopkeeper_info"
    text: "A silver locket, hmm? Now that you mention it, I did see young Tim playing with something shiny near the garden yesterday. Could've been a locket."
    speaker: "shopkeeper"
    emotional_state: "Neutral"
    inner_voice_comments:
      - voice_type: "Logic"
        text: "This could be a good lead. I should check the garden."
        trigger_condition: null
        skill_requirement: null
    options:
      - id: "thank_info"
        text: "Thank you, that's helpful. I'll check the garden."
        skill_check: null
        emotional_impact:
        conditions:
          required_quests: {}
        consequences:
        next_node: ""
        inner_voice_reactions: []

      - id: "doubt_info"
        text: "Are you sure? That doesn't sound very reliable."
        skill_check: null
        emotional_impact:
        conditions:
          required_quests: {}
        consequences:
        next_node: "shopkeeper_annoyed"
        inner_voice_reactions: []

  shopkeeper_annoyed:
    id: "shopkeeper_annoyed"
    text: "Well, it's all I know. Take it or leave it."
    speaker: "shopkeeper"
    emotional_state: "Angry"
    inner_voice_comments: []
    options:
      - id: "apologize"
        text: "Sorry, I appreciate the help. I'll check the garden."
        skill_check: null
        emotional_impact:
          Neutral: 0
        conditions:
          required_quests: {}
        consequences:
        next_node: ""
        inner_voice_reactions: []

      - id: "leave_annoyed"
        text: "Fine, I'll figure it out myself."
        skill_check: null
        emotional_impact:
        conditions:
          required_quests: {}
        consequences:
        next_node: ""
        inner_voice_reactions: []

  # Added placeholder dialogue trees for gardener and merchant
  gardener_default:
    id: "gardener_default"
    text: "Lovely day to be enjoying the garden, isn't it? The roses are particularly fragrant this season."
    speaker: "gardener"
    emotional_state: "Neutral"
    inner_voice_comments: []
    options:
      - id: "ask_about_locket"
        text: "I'm looking for a silver locket. Have you seen any children playing with something shiny here recently?"
        conditions:
          required_quests:
            "missing_locket": "InProgress"
        next_node: "gardener_locket_info"
      - id: "chat_gardens"
        text: "The garden is beautiful. How long have you worked here?"
        next_node: "gardener_chat"

  gardener_locket_info:
    id: "gardener_locket_info"
    text: "A silver locket? Yes, I did see some children playing over by the east garden beds yesterday. They were digging around in the soil. I had to shoo them away before they damaged my petunias."
    speaker: "gardener"
    emotional_state: "Friendly"
    inner_voice_comments: []
    options:
      - id: "thank_gardener"
        text: "Thanks for the information. I'll check over there."
        next_node: ""

  gardener_chat:
    id: "gardener_chat"
    text: "Oh, going on twenty years now. Started when my knees were better, that's for sure!"
    speaker: "gardener"
    emotional_state: "Neutral"
    inner_voice_comments: []
    options:
      - id: "end_chat"
        text: "Well, it shows. The garden is magnificent."
        next_node: ""

  merchant_default:
    id: "merchant_default"
    text: "Fresh fruits and vegetables! Best prices in town! What can I get for you today?"
    speaker: "Maya"
    emotional_state: "Friendly"
    inner_voice_comments: []
    options:
      - id: "ask_about_locket"
        text: "I'm looking for a silver locket that was lost recently. Have you seen anything like that?"
        conditions:
          required_quests:
            "missing_locket": "InProgress"
        next_node: "merchant_locket_info"
      - id: "browse_goods"
        text: "Just browsing for now, thanks."
        next_node: ""

  merchant_locket_info:
    id: "merchant_locket_info"
    text: "A silver locket? Hmm, I haven't seen one for sale anywhere, if that's what you're asking. But I did see some children playing in the garden yesterday. They seemed to be passing something shiny between them."
    speaker: "Maya"
    emotional_state: "Neutral"
    inner_voice_comments: []
    options:
      - id: "thank_merchant"
        text: "That's helpful, thank you. I'll check the garden."
        next_node: ""
        consequences:

quests:
  main_investigation:
    id: "main_investigation"
    title: "The Warehouse Investigation"
    description: "Investigate the strange occurrences at the warehouse."
    short_description: "Investigate warehouse incidents"
    importance: "Critical"
    is_main_quest: true
    is_hidden: false
    status: "NotStarted"
    stages:
      - id: "initial_investigation"
        title: "Initial Investigation"
        description: "Gather information about the warehouse incident."
        status: "NotStarted"
        objectives:
          - id: "talk_to_guard"
            description: "Talk to Officer Martinez about the incident"
            is_completed: false
            is_optional: false
            completion_events:
              - event_type: "AddClue"
                data:
                  id: "guard_statement"
                  description: "The guard mentioned unusual activity in the warehouse"
                  related_quest: "main_investigation"
                  discovered: true
          - id: "inspect_door"
            description: "Examine the warehouse entrance for signs of forced entry"
            is_completed: false
            is_optional: false
            completion_events:
              - event_type: "AddClue"
                data:
                  id: "forced_entry"
                  description: "The door shows signs of forced entry"
                  related_quest: "main_investigation"
                  discovered: true
        notification_text: "You've started investigating the warehouse incident."
      - id: "search_office"
        title: "Search the Office"
        description: "Look for clues in the security office."
        status: "NotStarted"
        objectives:
          - id: "check_logbook"
            description: "Review the security log book"
            is_completed: false
            is_optional: false
            completion_events:
              - event_type: "AddClue"
                data:
                  id: "logbook_entry"
                  description: "The last entry in the logbook is incomplete"
                  related_quest: "main_investigation"
                  discovered: true
          - id: "talk_to_worker"
            description: "Interview Sarah Chen about the incident"
            is_completed: false
            is_optional: false
            completion_events:
              - event_type: "AddClue"
                data:
                  id: "worker_statement"
                  description: "Sarah mentioned seeing suspicious figures"
                  related_quest: "main_investigation"
                  discovered: true
        notification_text: "You've found new leads in the security office."
      - id: "conclusion"
        title: "Draw Conclusions"
        description: "Piece together the evidence and solve the case."
        status: "NotStarted"
        objectives:
          - id: "solve_case"
            description: "Present your findings to Officer Martinez"
            is_completed: false
            is_optional: false
            completion_events:
              - event_type: "CompleteQuest"
                data:
                  quest_id: "main_investigation"
                  reward: "case_solved"
        notification_text: "You've solved the warehouse case!"

  missing_locket:
    id: "missing_locket"
    title: "The Missing Locket"
    description: "Help Eliza find her missing silver locket."
    short_description: "Find Eliza's lost locket"
    importance: "Optional"
    is_main_quest: false
    is_hidden: false
    status: "NotStarted"
    stages:
      - id: "search_town"
        title: "Search the Town"
        description: "Look for clues about the missing locket."
        status: "NotStarted"
        objectives:
          - id: "talk_to_eliza"
            description: "Get more information from Eliza about the locket"
            is_completed: false
            is_optional: false
            completion_events:
              - event_type: "AddClue"
                data:
                  id: "locket_description"
                  description: "A silver locket with a family portrait inside"
                  related_quest: "missing_locket"
                  discovered: true
          - id: "search_fountain"
            description: "Search around the town square fountain"
            is_completed: false
            is_optional: false
            completion_events:
              - event_type: "AddClue"
                data:
                  id: "fountain_clue"
                  description: "Found a thread that might be from the locket's chain"
                  related_quest: "missing_locket"
                  discovered: true
        notification_text: "You've started searching for the missing locket."
      - id: "find_locket"
        title: "Find the Locket"
        description: "Follow the clues to find the missing locket."
        status: "NotStarted"
        objectives:
          - id: "search_garden"
            description: "Search the garden for the locket"
            is_completed: false
            is_optional: false
            completion_events:
              - event_type: "AddItem"
                data:
                  id: "silver_locket"
                  name: "Silver Locket"
                  description: "A beautiful silver locket with intricate engravings"
                  effects: {}
              - event_type: "CompleteObjective"
                data:
                  quest_id: "missing_locket"
                  objective_id: "search_garden"
          - id: "return_locket"
            description: "Return the locket to Eliza"
            is_completed: false
            is_optional: false
            completion_events:
              - event_type: "CompleteQuest"
                data:
                  quest_id: "missing_locket"
                  reward: "eliza_gratitude"
        notification_text: "You've found the missing locket!"

  chen_shift_help:
    id: "chen_shift_help"
    title: "Help Sarah Chen"
    description: "Sarah Chen seems stressed about her shift. Maybe you can help her out."
    short_description: "Help Sarah with her shift"
    importance: "Optional"
    is_main_quest: false
    is_hidden: false
    status: "NotStarted"
    related_npcs: ["worker_chen"]
    stages:
      - id: "talk_to_chen"
        title: "Talk to Sarah"
        description: "Find out what's bothering Sarah about her shift."
        status: "NotStarted"
        objectives:
          - id: "ask_about_shift"
            description: "Talk to Sarah about her shift"
            is_completed: false
            is_optional: false
            completion_events:
              - event_type: "AddClue"
                data:
                  id: "chen_shift_problem"
                  description: "Sarah is worried about completing her shift on time"
                  related_quest: "chen_shift_help"
                  discovered: true
        notification_text: "You've learned about Sarah's shift problems."
      - id: "help_chen"
        title: "Help Sarah"
        description: "Assist Sarah with her shift tasks."
        status: "NotStarted"
        objectives:
          - id: "complete_tasks"
            description: "Help Sarah complete her shift tasks"
            is_completed: false
            is_optional: false
            completion_events:
              - event_type: "CompleteQuest"
                data:
                  quest_id: "chen_shift_help"
                  reward: "chen_gratitude"
        notification_text: "You've helped Sarah complete her shift!"
    rewards:
      relationship_changes:
        worker_chen: 10
      experience: 50
